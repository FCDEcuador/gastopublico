var FormContentArticlesValidation=function(){var e=function(){var e=$("#contentArticleForm"),t=$(".alert-danger",e),a=$(".alert-success",e);e.validate({errorElement:"div",errorClass:"form-control-feedback",focusInvalid:!0,ignore:"",rules:{title:{required:!0},summary:{required:!0},main_multimedia:{accept:"image/*"},author_email:{email:!0},content_category_id:{required:!0}},messages:{title:{required:"Por favor ingrese el título del artículo de contenido"},summary:{required:"Por favor ingrese el resumen del artículo de contenido"},main_multimedia:{accept:"Unicamente se aceptan imágenes"},author_email:{email:"Por favor ingrese un e-mail válido"},content_category_id:{required:"Por favor selecciona una categoría de contenido"}},invalidHandler:function(e,o){a.hide(),t.show()},errorPlacement:function(e,t){t.is(":checkbox")?e.insertAfter(t.closest(".md-checkbox-list, .md-checkbox-inline, .checkbox-list, .checkbox-inline")):t.is(":radio")?e.insertAfter(t.closest(".md-radio-list, .md-radio-inline, .radio-list,.radio-inline")):e.insertAfter(t)},highlight:function(e){$(e).closest(".form-group").addClass("has-danger"),$(e).closest(".form-control").addClass("form-control-danger")},unhighlight:function(e){$(e).closest(".form-group").removeClass("has-danger"),$(e).closest(".form-control").removeClass("form-control-danger")},success:function(e){e.closest(".form-group").removeClass("has-danger"),e.closest(".form-control").removeClass("form-control-danger")},submitHandler:function(e){CKEDITOR.instances.content.updateElement(),a.show(),t.hide();var o=Ladda.create(document.querySelector("#contentArticleBtn"));o.start(),o.setProgress(-1);var n=new FormData;$("#main_multimedia")[0].files[0]&&n.append("main_multimedia",$("#main_multimedia")[0].files[0]);var r=$(e).serializeArray();$.each(r,function(e,t){n.append(t.name,t.value)}),$.ajax({type:$(e).attr("method"),url:$(e).attr("action"),data:n,cache:!1,contentType:!1,processData:!1,beforeSend:function(){o.start()},success:function(e){!0===e.status?renderSection(urlContentArticlesList):swal({title:"BlaudCMS :: Artículos de Contenido",text:e.message,type:"error",allowOutsideClick:!0,showConfirmButton:!0,showCancelButton:!1,confirmButtonClass:"text-danger",cancelButtonClass:"",closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",cancelButtonText:""}),o.stop()},error:function(e){var t="",a="",e=e.responseJSON;$.each(e.errors,function(e,t){a+="\n"+t}),t=""!=a?"Ups! no se pudo actualizar la informacion debido a los siguientes errores: "+a:"Ups! parece que de momento el sistema no está disponible, por favor intentalo nuevamente en unos minutos.",swal({title:"BlaudCMS :: Artículos de Contenido",text:t,type:"error",allowOutsideClick:!0,showConfirmButton:!0,showCancelButton:!1,confirmButtonClass:"text-danger",cancelButtonClass:"",closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",cancelButtonText:""}),o.stop()}})}})};return{init:function(){e()}}}();$(document).ready(function(){FormContentArticlesValidation.init(),CKEDITOR.replace("content",CKEditorOptions),$(".select2").select2(),$("#publication_date").bootstrapMaterialDatePicker({format:"YYYY-MM-DD HH:mm"}),$("#release_date").bootstrapMaterialDatePicker({format:"YYYY-MM-DD HH:mm"}),$("#main_multimedia").dropify({messages:{default:"Arrastre un archivo hasta este lugar o de un clic para seleccionar uno",replace:"Arrastre un archivo hasta este lugar o de un clic para seleccionar uno",remove:"Quitar",error:"Ups! parece que algo no esta bien"},error:{fileSize:"El archivo es demasiado grande. ({{ value }} maximo).",minWidth:"La imagen es muy pequeña. ({{ value }}}px minimo).",maxWidth:"El ancho de la imagen es muy grande. ({{ value }}}px maximo).",minHeight:"El alto de la imagen es muy pequeño. ({{ value }}}px minimo).",maxHeight:"El alto de la imagen es muy grande. ({{ value }}px maximo).",imageFormat:"Este formato no esta permitido. ({{ value }} unicamente)."}})});
